<!DOCTYPE html>
<html lang="en_US">
<head>
    <meta charset="utf-8" />
    <title>Taks 1 | CAO Assignment</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta name="author" content="John Doe">
    <meta name="dc.copyright" content="Karl Mustermann">
    <meta name="description" content="This is only an example value for the meta description">
    <meta name="keywords" content="example, site, theme, tikva">

    
    <link href="https://thehaseebashraf.github.io/css/bootswatch/solar.min.css" rel="stylesheet">
    
    <link href="https://thehaseebashraf.github.io/css/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://thehaseebashraf.github.io/css/custom.css" rel="stylesheet">



<script type="text/javascript">
    var azbalacSettingHeaderMoveTitle = 'false';
</script>
<script src="https://thehaseebashraf.github.io/js/jquery-3.4.1.min.js"></script>
<script src="https://thehaseebashraf.github.io/js/functions.js"></script><style>body {}.footer-container { background-color: #29281f; }.footer-container { color: #f9fcf9; }</style>



<link id="typography-header-title-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Exo%3A800"><style id="typography-title" type="text/css">#site-header-text a {
        font-family: Exo;
    }#site-header-text a {
        font-size: 50px; 
    }</style>

<link id="typography-header-subtitle-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Exo%3A600"><style id="typography-subtitle" type="text/css">#site-description {
        font-family: Exo;
    }#site-description {
        font-size: 30px; 
    }</style>

<style id="typography-body" type="text/css"></style>

<style id="typography-navbar" type="text/css">nav#navbarMain {
        font-size: 20px; 
    }
    nav#navbarMain ul.dropdown-menu {
        font-size: 20px;
    }</style>

<link id="typography-headline-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans"><style id="typography-headline" type="text/css">h1, h2, h3, h4, h5, h6 {
                font-family: Open Sans; 
            }</style>



    
    <script type="text/javascript">
        var azbalacSettingHeaderColor = { 'bg': '#000000',
            'transp': '0'
            };

    </script>
    <style type="text/css">
        #site-header-text a, #site-description {
                background: "#000000";  
            background:  rgba(0,0,0,0.00);
            
        }
    </style>
    
    
    <style type="text/css">
        #site-header-box-title {
            margin-bottom: 0px;
        }
    </style>
    
    
    <style type="text/css">
        #site-header-container-overlay {
        
            left: 20px;
        
        
            top: 20px;
        
        }
    </style>
    


<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
        <script src="//cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
        <script src="//cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->


</head>


<body>

<div id="header" role="banner" style="">

    <div class="container">
        <header class="masthead">
            <div>
                <div id="site-header-container-above" class="row align-items-center">
                    
                </div>
            </div>


            

            <div id="site-header-above"><a href="https://thehaseebashraf.github.io/" rel="home">
                <picture>
                        <source media="(min-width: 1200px)" srcset="https://thehaseebashraf.github.io/wtf3.jpg 1110w">
                        <source media="(min-width: 992px) and (max-width: 1199.98px)" srcset="https://thehaseebashraf.github.io/wtf3.jpg 930w">
                        <source media="(min-width: 768px) and (max-width: 991.98px)" srcset="https://thehaseebashraf.github.io/wtf3.jpg 690w">
                        <source media="(min-width: 576px) and (max-width: 767.98px)" srcset="https://thehaseebashraf.github.io/wtf3.jpg 510w">
                        <source media="(max-width: 575.98px)" srcset="https://thehaseebashraf.github.io/wtf3.jpg 476w">
                        <img id="site-header-image" src="https://thehaseebashraf.github.io/wtf3.jpg" style="max-width: 100%; width: 100%">
                </picture>
                </a>

                <div id="site-header-container-overlay" class="position-absolute  fixed-top ">
                    <div id="site-header-box-title" class=" d-flex justify-content-start ">
                        <h1 class="azbalac-title" id="site-header-text"><a class="header-url" style="color: #073642;" href="https://thehaseebashraf.github.io/">CAO Assignment</a></h1>
                    </div>
                    
                    <div id="site-header-box-subtitle" class=" d-flex justify-content-start ">   
                        <h2 class="azbalac-subtitle" id="site-description" style="color: #333333;">By Haseeb Ashraf</h2>
                    </div>
                </div>
                
             
            </div>

    
    <nav id="navbarMain" class="navbar navbar-expand-sm justify-content-between mb-3 navbar-dark bg-primary" role="navigation">
        
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
        </button>
      
            
            <div class="sticky-top navbar-collapse collapse  " id="navbarSupportedContent"> 
                <ul class="navbar-nav">

  
  <li class="nav-item ">
    <a class="nav-link" href="/">
      
      Home
    </a>
  </li>
  <span class="mx-2"></span>
  
</ul>
             
            </div>
        
            
    </nav> 
    



      </header>
    </div> 
</div>


    <div id="main">
        <div class="container">
            <div class="row"><div class="col-md" id="content">





<h1>Taks 1</h1>

    <div class="post-meta"><span class="byline-icon fa fa-clock-o" aria-hidden="true"></span> <span class="screen-reader-text">Date: </span><time datetime="2021-04-22T00:36:14&#43;05:00">22.04.2021</time> - 
     </div>


  <h3 id="tools-used">Tools used:</h3>
<ol>
<li>Visual Studio Code</li>
<li>Docker</li>
<li>QEMU</li>
<li>Hugo</li>
</ol>
<ul>
<li>Firstly, we use VS code to setup our required files. Our task is to print OK on the screen for which we use some packages using RUN command. We use NASM to compile the code and grub package to get the final file.</li>
</ul>
<ul>
<li>The header.asm and main.asm files are contained in the SRC folder. We used two label for start and end of header. Here we add the magic number and length. We named it as section which helped us in the final stage of linking. We added two dwâ€™s and dd at the end set to zero to show that we dont have any more data.</li>
</ul>
<ul>
<li>We created the stack in our Main.asm file for storing all the local function calls data. It also helped in running C code that handled all stack manipulation files. In order to shift our kernel operating system to 64 bit mode we checked for multiboot, CPU ID (to check whether the cpu supports long mode or not) and then long mode. Page tables were also built inside main.asm file</li>
</ul>
<ul>
<li>hlt is used to freeze the cpu.</li>
</ul>
<ul>
<li>Linker.ld  is used to describe how to link our operatring system together. Entry is used as entrypoint named as start. We then defined each section individually. Boot folder is used to keep the multiboot header we defined in header.asm</li>
</ul>
<ul>
<li>grub.cfg is used to get the iso file because in most cases if you want to put your os in USB you need iso file.</li>
</ul>
<ul>
<li>
<p>In make file we created 2 variables that held all the source and object files inside src/impl/x86_64/boot. After this we defined the commands that will be used to build our object files into source files. And another to hold our compiled file. Nasm was used to compile the assembly program. After writing the code for compiling the file we built a custom command build-x86_64 which ran when only our object file was changed. We created a directory for storing our iso file. At last, we used grub rescue command to generate our iso file.</p>
</li>
<li>
<p>Main64.asm file is used to convert our operating system into 64-bit mode.</p>
</li>
<li>
<p>Main.c file will contain the basics of the screen i.e foreground color, background color and the text to be displayed on the screen.</p>
</li>
<li>
<p>Print.h file will be a header file that will create some methods and some an enum of colours.</p>
</li>
<li>
<p>Print.c file contained a custom print function and some other methods associated with it.</p>
</li>
<li>
<p>In the end, we ran qemu for simulating our operating system through the command qemu-system-x86_64 -cdrom dist/x86_64/kernel.iso</p>
</li>
</ul>


                </div>
                    <aside class="col-md-3 tikva-sidebar">
  

    

    
        <div class="col">
            <div class="p-3 mb-3 bg-light rounded">
                <h4>About Me</h4>
                <p><p class="mb-0">My name is Haseeb Ashraf. I completed my A levels from LGS Lahore. Currently I am in my 4th semester pursuing BSCS from NUST Islamabad. Among other things, I am passionate about game development and learning about business and finance.</p></p>
            </div>
        </div>
    

</aside>
</div>
        </div>
    </div>

    
        <div class="footer-container" style="">
    <div class="container">
        <footer>

            <div class="row">
            
                
                
                    <div class="col">
                        
                    </div>
                
                    <div class="col">
                        Created by Haseeb Ashraf  22.04.2021       Lahore, Pakistan 
                    </div>
                
                    <div class="col">
                        
                    </div>
                
            

            </div>
        </footer>
    </div>
</div>
    
    
        
<div class="subfooter-container">

    <div class="container">
        <div class="footer">
            <div class="row wrapper padding">
                <div class="col-xs-12 col-md-12">

            
            
                Powered by <a href="https://gohugo.io">Hugo</a>. Theme <a href="https://github.com/geschke/hugo-tikva">Tikva</a> by <a href="https://www.kuerbis.org">Ralf Geschke</a>.
            
                  
                </div>
            </div>
        </div>
    </div>
</div>

    

    <div id="media-width-detection-element"></div>
<script src="https://thehaseebashraf.github.io/js/popper.min.js"></script>
<script src="https://thehaseebashraf.github.io/js/bootstrap.min.js"></script>


</body>
</html>